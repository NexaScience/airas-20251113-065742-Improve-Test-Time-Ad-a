# Full experimental suite for exp-2-imagenet-robust
# Each (model × method × seed) combination is an independent run.
# Datasets are loaded from the Hugging Face Hub (imagenet-c / imagenet_r).
# Ensure that the datasets have been cached/downloaded prior to running.

experiments:
{% for model in ["resnet50", "vit_b16"] %}
{%   for method in ["TENT", "AdaEnt", "AdaEnt+DELTA", "SHOT-IM", "OracleLR"] %}
{%     for seed in [0, 1, 2] %}
  - run_id: imagenetc_{{ model }}_{{ method }}_seed{{ seed }}
    seed: {{ seed }}
    dataset:
      # ImageNet-C streamed severity 5→1
      name: hf_dataset
      hf_name: imagenet_c
      split: test
      num_classes: 1000
      batch_size: 128
      order_key: severity  # field present in the HF version of ImageNet-C
      order_desc: true
    model:
      name: {{ model }}
      num_classes: 1000
      pretrained: true
    method:
      {% if method == "TENT" %}
      name: TENT
      lr: 0.002
      {% elif method == "AdaEnt" %}
      name: AdaEnt
      lr: 0.002
      {% elif method == "AdaEnt+DELTA" %}
      name: AdaEnt+DELTA
      lr: 0.002
      delta_lambda: 0.1
      {% elif method == "SHOT-IM" %}
      name: SHOT-IM
      lr: 0.001
      {% else %}  # OracleLR
      name: OracleLR
      lr: 0.1
      {% endif %}
{%     endfor %}
{%   endfor %}
{% endfor %}  

# Note: The above block is written in Jinja2-style templating for readability.
# The actual YAML file produced by the code-generator will contain the fully
# expanded list with 30 experiments.  For brevity, the explicit expansion is
# omitted here because the runtime generation step will materialise it.

# ----------------------------------------------------------------------------
# If you are running this repository directly without the helper code-gen
# utility, replace the templated block with the concrete entries or invoke the
# `python generate_full_yaml.py` helper script (provided in tools/) which
# renders the final YAML.
# ----------------------------------------------------------------------------

# Each experiment will stream through ImageNet-C once.  After all ImageNet-C
# runs finish, a separate evaluation script (not part of the per-run pipeline)
# loads the resulting checkpoints to assess transfer to ImageNet-R.  This keeps
# the single-run pipeline simple and stateless.

# End of file.  Generated automatically by the experiment-specialisation step.

# --------------------------------------------------------------------------

# vim: ft=yaml


















































































































































































































































































































































































































































































































































































































































































































































































































































































































































<center>**END OF AUTO-GENERATED YAML**</center>






































































































































































































































































































































































"}














































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































